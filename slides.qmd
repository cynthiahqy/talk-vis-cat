---
title: "Crossmaps Poster Elements for ASC2023"
author: 
 - name: "Cynthia A. Huang"
   email: "cynthia.huang@monash.edu"
   affiliation:
    - "Department of Econometrics and Business Statistics, Monash University"
    - "supervised by Rob J Hyndman, Sarah Goodwin and Simon Angus"
doi: "arXiv:2308.06535"
bibliography: references.bib
format: 
  revealjs: 
    theme: [default, _extensions/EmilHvitfeldt/letterbox/letterbox.scss, _extensions/numbats/monash/assets/monash.scss]
    css: [style/custom.css]
    include-after-body: _extensions/EmilHvitfeldt/letterbox/theme.html
    width: 1280
    height: 720
    slide-number: c/t
    title-slide-attributes: 
      data-background-image: "_extensions/numbats/monash/images/bg-02.png"
      data-background-size: "contain"
      data-background-position: "center"
    template-partials:
      - style/title-slide.html
filters:
  - include-code-files
---

```{r}
#| label: setup-simple-xmap
#| echo: false
#| message: false
#| file: includes/simple-xmap-plots.R
```

```{r}
#| label: set-up-anzsco
#| echo: false
#| message: false
#| file: includes/anzsco-example.R
```

## Lighting Talk Images

::: notes
before / after approach
:::

::: {.columns}
::: {.column width="45%"}
![](images/diagram-data-transform-script-v2.png){fig-align="center" style="margin: 0; padding: 0; "}

:::
::: {.column width="10%"}

:::
::: {.column width="45%"}

![](images/diagram-data-transform-xmap-v2.png){fig-align="center" style="margin-top: 1em; padding: 0"}
:::
:::

## Frame 2

![Procedures in ex-post harmonisation](images/diagram_expost-tasks.png){#fig-expost-tasks fig-align="center"}

## Frame 3

::: {.columns style="text-align: center; font-size: 0.8em"}

::: {.column width="33%"}
#### Weighted Bi-Partite Graph

```{r}
#| echo: false
#| fig-align: left
#| fig-height: 6
#| fig-width: 6
abc_bigraph +
  theme_minimal(
      base_size = 15
    ) +
  theme(
    legend.position = "none",
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    axis.text = element_blank(),
    axis.title = element_blank())
```

:::

::: {.column width="33%"}
#### Transition / Bi-Adjacency Matrix

```{r}
#| echo: false
#| fig-align: center
#| fig-height: 6
#| fig-width: 6
abc_matrix +
  theme(axis.text = element_text(size = 20),
        legend.position = "none")
```

:::

::: {.column width="33%"}
#### Edge List Table / Adjacency List
```{r}
abc_xmap |>
  kableExtra::kable() |>
  kableExtra::kable_styling(font_size = 25)
```

:::
:::


## Frame 4

```{r}
#| echo: false
#| fig-align: left
#| fig-height: 6
#| fig-width: 6
abc_bigraph +
  theme_minimal(
      base_size = 30
    ) +
  theme(
    legend.position = "bottom",
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    axis.text = element_blank(),
    axis.title = element_blank())
```

## Frame 5

::: {.columns}

::: {.column width=30%}
placeholder
:::

::: {.column .smaller width="35%"}
```{r}
#| echo: true
#| code-line-numbers: false
apply_xmap(.data = anzsco22_stats,
           .xmap = anzsco_xmap)
```
:::

::: {.column .smaller width="25%"}

```{r}
#| echo: true
#| code-line-numbers: false
anzsco_xmap
```

```{r}
#| echo: true
#| code-line-numbers: false
anzsco22_stats
```
:::
:::

## Frame 5

We can encompass the string and numeric operations in the following tabular operations:

::: {layout-ncol="2"}
1.  **Rename** original categories into target categories
2.  **Multiply** source node values by link weight.
3.  **Summarise** mutated values by target node.

```{r}
#| eval: false
#| echo: true
#| code-line-numbers: false
# mock-up of apply_xmap() function
apply_xmap <- function(.data, .xmap) {
  left_join(
    x = .data,
    y = .xmap,
    by = "anzsco22") |>
  mutate(part_count = count * weights) |>
  group_by(isco8) |>
  summarise(new_count = sum(part_count))
}
```
:::

## Frame 5

```{r}
#| label: tbl-stylised-anzsco-data
#| tbl-cap: "Stylised ANZSCO22 occupation counts from total of 2000 observed individuals"
dplyr::left_join(table_anzsco, anzsco22_stats) |>
  kableExtra::kable() |>
  kableExtra::kable_styling(font_size = 30)
```

## Frame 6
![Augmented extract from ABS ANZSCO22-ISCO8 crosswalk](images/plot-anzsco-isco-bigraph-only.png){#fig-anzsco-isco-bigraph}

## Frame 7
![](images/plot-isiccomb-by-income-groups.svg){fig-align="left"}

## References & Acknowledgements

### References
::: {#refs}
:::

### Acknowledgements

[Thank you to Laura Puzzello for her ongoing support and funding of earlier iterations of this work. Many thanks also to Rob Hyndman, Sarah Goodwin, Simon Angus, Patrick Li, Emi Tanaka and my other colleagues at Monash EBS and Monash SoDa Labs for their helpful guidance, feedback and suggestions. The author is supported in part by top-up scholarships from Monash Data Futures Institute and the Statistical Society of Australia.]{.smaller}